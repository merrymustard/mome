{"version":3,"file":"helpers.js","sourceRoot":"","sources":["../src/helpers.ts"],"names":[],"mappings":";;;;;;;;;AAAA,+BAAsE;AAEtE,2CAA8B;AAEjB,QAAA,SAAS,GAAG,cAAc,CAAA;AAEvC,8DAA8D;AACjD,QAAA,cAAc,GAAG,UAAsB,KAAQ;IAC1D,OAAA,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,iBAAS,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;AAArE,CAAqE,CAAA;AAE1D,QAAA,YAAY,GAAG,UAAC,KAAU;IACrC,OAAA,CAAC,KAAK,IAAI,KAAK,CAAC,iBAAS,CAAC,CAAC,GAAG,CAAC;AAA/B,CAA+B,CAAA;AAEpB,QAAA,YAAY,GAAG,UAAC,GAAQ,EAAE,GAAQ,EAAE,KAAU;IACzD,OAAA,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,KAAK,OAAA,EAAE,QAAQ,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;AAA9E,CAA8E,CAAA;AAQnE,QAAA,EAAE,GAAG;IAChB,GAAG,EAAE,KAAK,CAAC,OAAkB;IAC7B,GAAG,EAAE,UAAgB,CAAI;QACvB,OAAA,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,IAAI,KAAK,QAAQ;IAAtC,CAAsC;IACxC,GAAG,EAAE,UAAC,CAAU,IAAoB,OAAA,OAAO,CAAC,KAAK,UAAU,EAAvB,CAAuB;IAC3D,GAAG,EAAE,UAAC,CAAU,IAAkB,OAAA,OAAO,CAAC,KAAK,QAAQ,EAArB,CAAqB;IACvD,GAAG,EAAE,UAAC,CAAU,IAAkB,OAAA,OAAO,CAAC,KAAK,QAAQ,EAArB,CAAqB;IACvD,GAAG,EAAE,UAAC,CAAU,IAAqB,OAAA,CAAC,KAAK,SAAS,EAAf,CAAe;CACrD,CAAA;AAED,gCAAgC;AAChC,SAAgB,OAAO,CAAC,CAAM,EAAE,CAAM;IACpC,IAAI,UAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;QACb,IAAI,CAAC,UAAE,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM;YAAE,OAAO,KAAK,CAAA;QACrD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACjC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAAE,OAAO,KAAK,CAAA;SAChC;QACD,OAAO,IAAI,CAAA;KACZ;IACD,OAAO,CAAC,KAAK,CAAC,CAAA;AAChB,CAAC;AATD,0BASC;AAED,0DAA0D;AAC7C,QAAA,kBAAkB,GAAG,UAAC,KAAc;IAC/C,OAAA,UAAE,CAAC,GAAG,CAAC,KAAK,CAAC;QACb,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,GAAG;YACd,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;YAChB,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,IAAI,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;AAH1C,CAG0C,CAAA;AA4B5C,8EAA8E;AACjE,QAAA,IAAI,GAAW,UAAC,GAAc,EAAE,EAAO,EAAE,GAAQ;IAC5D,IAAI,UAAE,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;QACvB,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,GAAG,CAAC,CAAA;KACrB;SAAM;QACL,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,EAA3B,CAA2B,CAAC,CAAA;KAC7D;AACH,CAAC,CAAA;AAEY,QAAA,OAAO,GAAG,UAAI,CAAI;IAC7B,OAAA,UAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAA7C,CAA6C,CAAA;AAElC,QAAA,OAAO,GAAG,UAAC,MAA4B,IAAK,OAAA,iBAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAArB,CAAqB,CAAA;AAEjE,QAAA,cAAc,GAAG,cAAM,OAAA,kBAAU,CAAC,cAAM,OAAA,CAAC,EAAE,CAAC,EAAJ,CAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAiB,EAA5C,CAA4C,CAAA;AAEhF,2CAA2C;AAC3C,SAAgB,OAAO,CAAI,KAAQ;IACjC,IAAM,OAAO,GAAG,cAAM,CAAM,SAAS,CAAC,CAAA;IACtC,iBAAS,CAAC;QACR,OAAO,CAAC,OAAO,GAAG,KAAK,CAAA;IACzB,CAAC,CAAC,CAAA;IACF,OAAO,OAAO,CAAC,OAAO,CAAA;AACxB,CAAC;AAND,0BAMC;AAID;;;;GAIG;AACU,QAAA,yBAAyB,GACpC,OAAO,MAAM,KAAK,WAAW;IAC7B,OAAO,MAAM,CAAC,QAAQ,KAAK,WAAW;IACtC,OAAO,MAAM,CAAC,QAAQ,CAAC,aAAa,KAAK,WAAW;IAClD,CAAC,CAAC,uBAAe;IACjB,CAAC,CAAC,iBAAS,CAAA","sourcesContent":["import { useEffect, useLayoutEffect, useReducer, useRef } from 'react'\nimport { Indexable, Arrify, FluidValue } from './types'\nimport * as G from './globals'\n\nexport const FluidType = '__$FluidType'\n\n/** Let the given object be observed by any `FluidObserver` */\nexport const makeFluidValue = <T extends Indexable>(value: T): T =>\n  Object.defineProperty(value, FluidType, { value: 1, writable: true })\n\nexport const isFluidValue = (value: any): value is FluidValue =>\n  (value && value[FluidType]) > 0\n\nexport const defineHidden = (obj: any, key: any, value: any) =>\n  Object.defineProperty(obj, key, { value, writable: true, configurable: true })\n\ninterface IsArray {\n  <T>(a: T): a is T & readonly any[]\n}\n\ntype PlainObject<T> = Exclude<T & Indexable, Function | readonly any[]>\n\nexport const is = {\n  arr: Array.isArray as IsArray,\n  obj: <T extends any>(a: T): a is PlainObject<T> =>\n    !!a && a.constructor.name === 'Object',\n  fun: (a: unknown): a is Function => typeof a === 'function',\n  str: (a: unknown): a is string => typeof a === 'string',\n  num: (a: unknown): a is number => typeof a === 'number',\n  und: (a: unknown): a is undefined => a === undefined,\n}\n\n/** Compare animatable values */\nexport function isEqual(a: any, b: any) {\n  if (is.arr(a)) {\n    if (!is.arr(b) || a.length !== b.length) return false\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false\n    }\n    return true\n  }\n  return a === b\n}\n\n// Not all strings can be animated (eg: {display: \"none\"})\nexport const needsInterpolation = (value: unknown): value is string =>\n  is.str(value) &&\n  (value[0] == '#' ||\n    /\\d/.test(value) ||\n    !!(G.colorNames && G.colorNames[value]))\n\ninterface EachFn {\n  <T = any, This = any>(\n    obj: ReadonlySet<T>,\n    cb: (this: This, value: T) => void,\n    ctx?: This\n  ): void\n\n  <P = any, T = any, This = any>(\n    obj: ReadonlyMap<P, T>,\n    cb: (this: This, value: T, key: P) => void,\n    ctx?: This\n  ): void\n\n  <T = any, This = any>(\n    arr: readonly T[],\n    cb: (this: This, value: T, index: number) => void,\n    ctx?: This\n  ): void\n\n  <T extends Indexable = any, This = any>(\n    obj: T,\n    cb: (this: This, value: T[keyof T], key: keyof T) => void,\n    ctx?: This\n  ): void\n}\n\n/** An unsafe object/array/set iterator that allows for better minification */\nexport const each: EachFn = (obj: Indexable, cb: any, ctx: any) => {\n  if (is.fun(obj.forEach)) {\n    obj.forEach(cb, ctx)\n  } else {\n    Object.keys(obj).forEach(key => cb.call(ctx, obj[key], key))\n  }\n}\n\nexport const toArray = <T>(a: T): Arrify<Exclude<T, void>> =>\n  is.und(a) ? [] : is.arr(a) ? (a as any) : [a]\n\nexport const useOnce = (effect: React.EffectCallback) => useEffect(effect, [])\n\nexport const useForceUpdate = () => useReducer(() => ({}), 0)[1] as (() => void)\n\n/** Use a value from the previous render */\nexport function usePrev<T>(value: T): T | undefined {\n  const prevRef = useRef<any>(undefined)\n  useEffect(() => {\n    prevRef.current = value\n  })\n  return prevRef.current\n}\n\ndeclare const window: any\n\n/**\n * React calls `console.warn` when using `useLayoutEffect` on the server.\n * To get around it, we can conditionally `useEffect` on the server (no-op) and\n * `useLayoutEffect` on the client.\n */\nexport const useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n    ? useLayoutEffect\n    : useEffect\n"]}