{"version":3,"file":"globals.js","sourceRoot":"","sources":["../src/globals.ts"],"names":[],"mappings":";;AA+CA,uJAAuJ;AAC5I,QAAA,GAAG,GAAG,cAAM,OAAA,IAAI,CAAC,GAAG,EAAE,EAAV,CAAU,CAAA;AAIjC,uHAAuH;AAC5G,QAAA,cAAc,GAAG,cAAM,OAAA,WAAW,CAAC,GAAG,EAAE,EAAjB,CAAiB,CAAA;AAEnD,mDAAmD;AACxC,QAAA,UAAU,GAAqC,IAAW,CAAA;AAErE,kEAAkE;AACvD,QAAA,aAAa,GAAG,KAAK,CAAA;AAEhC,qEAAqE;AAC1D,QAAA,iBAAiB,GAAG,UAAC,KAAU,IAAK,OAAA,KAAK,EAAL,CAAK,CAAA;AAEpD,kDAAkD;AACvC,QAAA,mBAAmB,GAAiC,IAAW,CAAA;AAE1E,sDAAsD;AAC3C,QAAA,uBAAuB,GAEvB,IAAW,CAAA;AAEX,QAAA,qBAAqB,GAC9B,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,cAAM,OAAA,CAAC,CAAC,EAAF,CAAE,CAAA;AAE9D,QAAA,oBAAoB,GAC7B,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CAAC,cAAO,CAAC,CAAA;AAuB3D,QAAA,MAAM,GAAG,UAAC,OAAwB;;IAC7C,OAAA,CAAC;;;;;;;;;;;;;;;6BAiCA,EAhCC,kBAAE,EACF,oBAAG,EACH,gCAAS,EACT,kCAAU,EACV,wCAAa,EACb,0CAAc,EACd,0CAAc,EACd,gDAAiB,EACjB,oDAAmB,EACnB,8DAAwB,EACxB,4DAAuB,EACvB,oDAAmB,EACnB,wDAAqB,EACrB,sDAAoB,KAmBpB;AAjCF,CAiCE,CAAA;AAEJ,0BAA0B;AAC1B,SAAS,YAAY,CAAC,OAAY;IAChC,IAAM,OAAO,GAAQ,EAAE,CAAA;IACvB,KAAK,IAAM,GAAG,IAAI,OAAO,EAAE;QACzB,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,SAAS;YAAE,OAAO,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAA;KAC5D;IACD,OAAO,OAAO,CAAA;AAChB,CAAC","sourcesContent":["import {\n  InterpolatorConfig,\n  FrameRequestCallback,\n  InterpolatorArgs,\n  FluidValue,\n  OneOrMore,\n} from './types'\nimport { ElementType } from 'react'\n\ndeclare const window: {\n  requestAnimationFrame: (cb: (time: number) => void) => number\n  cancelAnimationFrame: (id: number) => void\n}\n\n//\n// Required\n//\n\nexport let defaultElement: string | ElementType\n\n/** Provide custom logic for native updates */\nexport let applyAnimatedValues: (node: any, props: any) => boolean | void\n\n/** Provide custom logic for string interpolation */\nexport let createStringInterpolator: (\n  config: InterpolatorConfig<string>\n) => (input: number) => string\n\n/** Provide a custom `FrameLoop` instance */\nexport let frameLoop: {\n  active: boolean\n  update: (time?: number) => boolean\n  onFrame(cb: FrameRequestCallback, next?: boolean): void\n  onWrite(cb: FrameRequestCallback): void\n  start(spring: any): void\n  stop(spring: any): typeof frameLoop\n}\n\n//\n// Optional\n//\n\nexport let to: <In, Out>(\n  source: OneOrMore<FluidValue>,\n  args: InterpolatorArgs<In, Out>\n) => FluidValue<Out>\n\n/** Used for timestamps in milliseconds. Read more [here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now) */\nexport let now = () => Date.now()\n\ndeclare const performance: { now: () => number }\n\n/** Used to measure frame length. Read more [here](https://developer.mozilla.org/en-US/docs/Web/API/Performance/now) */\nexport let performanceNow = () => performance.now()\n\n/** Provide custom color names for interpolation */\nexport let colorNames: { [key: string]: number } | null = null as any\n\n/** Make all animations instant and skip the frameloop entirely */\nexport let skipAnimation = false\n\n/** Intercept props before they're passed to an animated component */\nexport let getComponentProps = (props: any) => props\n\n/** Wrap the `style` prop with an animated node */\nexport let createAnimatedStyle: ((style: any) => any) | null = null as any\n\n/** Wrap the `transform` prop with an animated node */\nexport let createAnimatedTransform:\n  | ((transform: any) => any)\n  | null = null as any\n\nexport let requestAnimationFrame: typeof window.requestAnimationFrame =\n  typeof window !== 'undefined' ? window.requestAnimationFrame : () => -1\n\nexport let cancelAnimationFrame: typeof window.cancelAnimationFrame =\n  typeof window !== 'undefined' ? window.cancelAnimationFrame : () => {}\n\n//\n// Configuration\n//\n\nexport interface AnimatedGlobals {\n  to?: typeof to\n  now?: typeof now\n  frameLoop?: typeof frameLoop\n  colorNames?: typeof colorNames\n  skipAnimation?: typeof skipAnimation\n  defaultElement?: typeof defaultElement\n  performanceNow?: typeof performanceNow\n  getComponentProps?: typeof getComponentProps\n  applyAnimatedValues?: typeof applyAnimatedValues\n  createStringInterpolator?: typeof createStringInterpolator\n  createAnimatedTransform?: typeof createAnimatedTransform\n  createAnimatedStyle?: typeof createAnimatedStyle\n  requestAnimationFrame?: typeof requestAnimationFrame\n  cancelAnimationFrame?: typeof cancelAnimationFrame\n}\n\nexport const assign = (globals: AnimatedGlobals): AnimatedGlobals =>\n  ({\n    to,\n    now,\n    frameLoop,\n    colorNames,\n    skipAnimation,\n    defaultElement,\n    performanceNow,\n    getComponentProps,\n    applyAnimatedValues,\n    createStringInterpolator,\n    createAnimatedTransform,\n    createAnimatedStyle,\n    requestAnimationFrame,\n    cancelAnimationFrame,\n  } = Object.assign(\n    {\n      to,\n      now,\n      frameLoop,\n      colorNames,\n      skipAnimation,\n      defaultElement,\n      performanceNow,\n      getComponentProps,\n      applyAnimatedValues,\n      createStringInterpolator,\n      createAnimatedTransform,\n      createAnimatedStyle,\n      requestAnimationFrame,\n      cancelAnimationFrame,\n    },\n    pluckDefined(globals)\n  ))\n\n// Ignore undefined values\nfunction pluckDefined(globals: any) {\n  const defined: any = {}\n  for (const key in globals) {\n    if (globals[key] !== undefined) defined[key] = globals[key]\n  }\n  return defined\n}\n"]}