{"ast":null,"code":"var _jsxFileName = \"/Users/eduardo/Documents/E/Dev/Ironhack/module_3/week7/day5/DailyExercise/lab-profile-app/frontend/src/context.js\";\nimport React, { Component, createContext } from \"react\";\nimport MY_SERVICE from \"./services/index\";\nimport Swal from \"sweetalert2\";\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loggedUser: false,\n      formSignup: {\n        username: \"\",\n        campus: \"\",\n        password: \"\",\n        course: \"\"\n      },\n      loginForm: {\n        username: \"\",\n        password: \"\"\n      },\n      user: {}\n    };\n\n    this.handleInput = (e, obj) => {\n      const a = this.state[obj];\n      const key = e.target.name;\n      a[key] = e.target.value;\n      this.setState({\n        obj: a\n      });\n    };\n\n    this.handleSignup = async e => {\n      e.preventDefault();\n\n      const _ref = await MY_SERVICE.signup(this.state.formSignup),\n            data = _ref.data;\n\n      Swal.fire(`Welcome ${data.user.name}`, \"User created\", \"success\");\n    };\n\n    this.handleLogin = (e, cb) => {\n      e.preventDefault();\n      MY_SERVICE.login(this.state.loginForm).then(({\n        data\n      }) => {\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        cb();\n      }).catch(err => {\n        Swal.fire(`Wrong something.`, \"☠️\", \"error\");\n      });\n    };\n\n    this.handleLogout = async cb => {\n      await MY_SERVICE.logout();\n      window.localStorage.clear();\n      this.setState({\n        loggedUser: false,\n        user: {}\n      });\n      cb();\n    };\n  }\n\n  componentDidMount() {\n    if (document.cookie) {\n      MY_SERVICE.getUser().then(({\n        data\n      }) => {\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        Swal.fire(`Welcome back ${data.user.name} `, \"\", \"success\");\n      }).catch(err => console.log(err));\n    }\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(MyContext.Provider, {\n      value: {\n        loggedUser: this.state.loggedUser,\n        formSignup: this.state.formSignup,\n        loginForm: this.state.loginForm,\n        handleInput: this.handleInput,\n        handleSignup: this.handleSignup,\n        handleLogin: this.handleLogin,\n        handleLogout: this.handleLogout\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default MyProvider;","map":{"version":3,"sources":["/Users/eduardo/Documents/E/Dev/Ironhack/module_3/week7/day5/DailyExercise/lab-profile-app/frontend/src/context.js"],"names":["React","Component","createContext","MY_SERVICE","Swal","MyContext","MyProvider","state","loggedUser","formSignup","username","campus","password","course","loginForm","user","handleInput","e","obj","a","key","target","name","value","setState","handleSignup","preventDefault","signup","data","fire","handleLogin","cb","login","then","catch","err","handleLogout","logout","window","localStorage","clear","componentDidMount","document","cookie","getUser","console","log","render","props","children"],"mappings":"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","sourcesContent":["import React, { Component, createContext } from \"react\";\nimport MY_SERVICE from \"./services/index\";\nimport Swal from \"sweetalert2\";\n\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  state = {\n    loggedUser: false,\n    formSignup: {\n      username: \"\",\n      campus: \"\",\n      password: \"\",\n      course: \"\"\n    },\n    loginForm: {\n      username: \"\",\n      password: \"\"\n    },\n    user: {}\n  };\n  componentDidMount() {\n    if (document.cookie) {\n      MY_SERVICE.getUser()\n        .then(({ data }) => {\n          this.setState({ loggedUser: true, user: data.user });\n          Swal.fire(`Welcome back ${data.user.name} `, \"\", \"success\");\n        })\n        .catch(err => console.log(err));\n    }\n  }\n\n  handleInput = (e, obj) => {\n    const a = this.state[obj];\n    const key = e.target.name;\n    a[key] = e.target.value;\n    this.setState({ obj: a });\n  };\n\n  handleSignup = async e => {\n    e.preventDefault();\n    const { data } = await MY_SERVICE.signup(this.state.formSignup);\n    Swal.fire(`Welcome ${data.user.name}`, \"User created\", \"success\");\n  };\n\n  handleLogin = (e, cb) => {\n    e.preventDefault();\n    MY_SERVICE.login(this.state.loginForm)\n      .then(({ data }) => {\n        this.setState({ loggedUser: true, user: data.user });\n        cb();\n      })\n      .catch(err => {\n        Swal.fire(`Wrong something.`, \"☠️\", \"error\");\n      });\n  };\n\n  handleLogout = async cb => {\n    await MY_SERVICE.logout();\n    window.localStorage.clear();\n    this.setState({ loggedUser: false, user: {} });\n    cb();\n  };\n\n  render() {\n    console.log(this.state);\n    return (\n      <MyContext.Provider\n        value={{\n          loggedUser: this.state.loggedUser,\n          formSignup: this.state.formSignup,\n          loginForm: this.state.loginForm,\n          handleInput: this.handleInput,\n          handleSignup: this.handleSignup,\n          handleLogin: this.handleLogin,\n          handleLogout: this.handleLogout\n        }}\n      >\n        {this.props.children}\n      </MyContext.Provider>\n    );\n  }\n}\n\nexport default MyProvider;\n"]},"metadata":{},"sourceType":"module"}