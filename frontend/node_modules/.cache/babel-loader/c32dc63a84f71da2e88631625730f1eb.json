{"ast":null,"code":"import _objectSpread from \"/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/src/context.js\";\nimport React, { Component, createContext } from \"react\";\nimport MY_SERVICE from \"./services/index\";\nimport Swal from \"sweetalert2\";\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loggedUser: false,\n      formSignup: {\n        username: \"\",\n        name: \"\",\n        lastname: \"\",\n        country: \"\",\n        gender: \"\",\n        password: \"\",\n        email: \"\"\n      },\n      loginForm: {\n        username: \"\",\n        password: \"\"\n      },\n      stockInputs: [0],\n      user: {},\n      newProduct: {\n        name: \"\",\n        brand: \"\",\n        caption: \"\",\n        price: 0,\n        color: [],\n        size: [],\n        quantity: [],\n        details: \"\",\n        image: [],\n        category: \"\",\n        subcategory: \"\"\n      },\n      checkedBoxes: {\n        checked: false,\n        checked_men: false,\n        checked_women: false,\n        checked_blue: false,\n        checked_red: false,\n        checked_yellow: false,\n        checked_green: false,\n        checked_white: false,\n        checked_black: false,\n        checked_pink: false\n      },\n      checked: false\n    };\n\n    this.handleInput = (e, obj) => {\n      const a = this.state[obj];\n      const key = e.target.name;\n      a[key] = e.target.value;\n      this.setState({\n        obj: a\n      });\n    };\n\n    this.handleSignup = async e => {\n      e.preventDefault();\n\n      const _ref = await MY_SERVICE.signup(this.state.formSignup),\n            data = _ref.data;\n\n      console.log(data);\n      Swal.fire(`Welcome ${data.user.name}`, \"User created\", \"success\");\n    };\n\n    this.handleStockInput = e => {\n      const a = e.target.name;\n      const list = this.state.newProduct.a;\n      list.push(e.target.value);\n      const addStock = {};\n      addStock[a] = list;\n      this.setState({\n        newProduct: addStock\n      });\n    };\n\n    this.addProduct = async e => {\n      e.preventDefault();\n      const newProduct = this.state.newProduct;\n      console.log(this.state.newProduct);\n\n      const _ref2 = await MY_SERVICE.addproduct({\n        newProduct\n      }),\n            data = _ref2.data;\n\n      console.log(data); // Swal.fire(`Success`, `New Product Created ${data.product.name}`, \"success\")\n    };\n\n    this.addStockForm = e => {\n      e.preventDefault();\n      this.setState(prevState => {\n        return _objectSpread({}, prevState, {\n          stockInputs: [...prevState.stockInputs, prevState.stockInputs.length + 1]\n        });\n      });\n    };\n\n    this.handleLogin = (e, cb) => {\n      e.preventDefault();\n      MY_SERVICE.login(this.state.loginForm).then(({\n        data\n      }) => {\n        console.log(data);\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        cb();\n      }).catch(err => {\n        Swal.fire(`Quien sabe que paso`, '☠️', 'error');\n      });\n    };\n\n    this.handleLogout = async cb => {\n      await MY_SERVICE.logout();\n      window.localStorage.clear();\n      this.setState({\n        loggedUser: false,\n        user: {}\n      });\n      cb();\n    };\n\n    this.handleCheckboxChange = event => {\n      const target = event.target;\n      this.setState({\n        target: event.target.checked\n      }); // console.log(this.state)\n    };\n  }\n\n  componentDidMount() {\n    if (document.cookie) {\n      MY_SERVICE.getUser().then(({\n        data\n      }) => {\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        Swal.fire(`Welcome back ${data.user.name} `, \"\", \"success\");\n      }).catch(err => console.log(err));\n    }\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(MyContext.Provider, {\n      value: {\n        state: this.state,\n        loggedUser: this.state.loggedUser,\n        formSignup: this.state.formSignup,\n        loginForm: this.state.loginForm,\n        handleInput: this.handleInput,\n        handleSignup: this.handleSignup,\n        handleLogin: this.handleLogin,\n        handleLogout: this.handleLogout,\n        addStockForm: this.addStockForm,\n        newProduct: this.state.newProduct,\n        addProduct: this.addProduct,\n        stockInputs: this.state.stockInputs,\n        checked: this.state.checked,\n        handleCheckboxChange: this.handleCheckboxChange // user: this.state.user,\n\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default MyProvider;","map":{"version":3,"sources":["/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/src/context.js"],"names":["React","Component","createContext","MY_SERVICE","Swal","MyContext","MyProvider","state","loggedUser","formSignup","username","name","lastname","country","gender","password","email","loginForm","stockInputs","user","newProduct","brand","caption","price","color","size","quantity","details","image","category","subcategory","checkedBoxes","checked","checked_men","checked_women","checked_blue","checked_red","checked_yellow","checked_green","checked_white","checked_black","checked_pink","handleInput","e","obj","a","key","target","value","setState","handleSignup","preventDefault","signup","data","console","log","fire","handleStockInput","list","push","addStock","addProduct","addproduct","addStockForm","prevState","length","handleLogin","cb","login","then","catch","err","handleLogout","logout","window","localStorage","clear","handleCheckboxChange","event","componentDidMount","document","cookie","getUser","render","props","children"],"mappings":"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","sourcesContent":["import React, {\n  Component,\n  createContext\n} from \"react\";\nimport MY_SERVICE from \"./services/index\";\nimport Swal from \"sweetalert2\";\n\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  state = {\n    loggedUser: false,\n    formSignup: {\n      username: \"\",\n      name: \"\",\n      lastname: \"\",\n      country: \"\",\n      gender: \"\",\n      password: \"\",\n      email: \"\"\n    },\n    loginForm: {\n      username: \"\",\n      password: \"\"\n    },\n    stockInputs: [0],\n    user: {},\n    newProduct: {\n      name: \"\",\n      brand: \"\",\n      caption: \"\",\n      price: 0,\n      color: [],\n      size: [],\n      quantity: [],\n      details: \"\",\n      image: [],\n      category: \"\",\n      subcategory: \"\"\n    },\n    checkedBoxes: {\n      checked: false,\n      checked_men: false,\n      checked_women: false,\n      checked_blue : false,\n      checked_red: false,\n      checked_yellow: false,\n      checked_green: false,\n      checked_white: false,\n      checked_black: false,\n      checked_pink: false\n    },  \n    checked: false\n  };\n  componentDidMount() {\n    if (document.cookie) {\n      MY_SERVICE.getUser()\n        .then(({\n          data\n        }) => {\n          this.setState({\n            loggedUser: true,\n            user: data.user\n          });\n          Swal.fire(`Welcome back ${data.user.name} `, \"\", \"success\");\n        })\n        .catch(err => console.log(err));\n    }\n  }\n\n  handleInput = (e, obj) => {\n    const a = this.state[obj];\n    const key = e.target.name;\n    a[key] = e.target.value;\n    this.setState({\n      obj: a\n    });\n  };\n\n  handleSignup = async e => {\n    e.preventDefault();\n    const {\n      data\n    } = await MY_SERVICE.signup(this.state.formSignup);\n    console.log(data)\n    Swal.fire(`Welcome ${data.user.name}`, \"User created\", \"success\");\n  };\n\n  handleStockInput = e => {\n    const a = e.target.name;\n    const list = this.state.newProduct.a;\n    list.push(e.target.value);\n    const addStock = {}\n    addStock[a] = list\n    this.setState({\n      newProduct: addStock\n    })\n  }\n\n  addProduct = async e => {\n    e.preventDefault();\n    const {newProduct} = this.state\n    console.log(this.state.newProduct)\n    const {\n      data\n    } = await MY_SERVICE.addproduct({newProduct})\n    console.log(data)\n    // Swal.fire(`Success`, `New Product Created ${data.product.name}`, \"success\")\n  }\n\n  addStockForm = e => {\n    e.preventDefault();\n    this.setState(prevState => {\n      return {\n        ...prevState,\n        stockInputs: [...prevState.stockInputs, prevState.stockInputs.length + 1]        \n      }\n    })\n  }\n\n\n  handleLogin = (e, cb) => {\n    e.preventDefault();\n    MY_SERVICE.login(this.state.loginForm)\n      .then(({\n        data\n      }) => {\n        console.log(data)\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        })\n        cb()\n      })\n      .catch(err => {\n        Swal.fire(`Quien sabe que paso`, '☠️', 'error')\n      });\n  };\n\n  handleLogout = async cb => {\n    await MY_SERVICE.logout();\n\n    window.localStorage.clear();\n    this.setState({\n      loggedUser: false,\n      user: {}\n    });\n    cb();\n  };\n\n  // FIXME: recyclable function for checking boxes\n\n  handleCheckboxChange = event => {\n    const target = event.target\n    this.setState({ target: event.target.checked })\n    // console.log(this.state)\n  }\n\n\n  render() {\n    console.log(this.state)\n    return (\n    <MyContext.Provider value = {\n        {          \n          state: this.state,\n          loggedUser: this.state.loggedUser,\n          formSignup: this.state.formSignup,\n          loginForm: this.state.loginForm,\n          handleInput: this.handleInput,\n          handleSignup: this.handleSignup,\n          handleLogin: this.handleLogin,\n          handleLogout: this.handleLogout,\n          addStockForm: this.addStockForm,\n          newProduct: this.state.newProduct,\n          addProduct: this.addProduct,\n          stockInputs: this.state.stockInputs,\n          checked: this.state.checked,\n          handleCheckboxChange: this.handleCheckboxChange\n          // user: this.state.user,\n        }\n      } >\n      {\n        this.props.children\n      } \n      </MyContext.Provider>\n    );\n  }\n}\n\nexport default MyProvider;"]},"metadata":{},"sourceType":"module"}