{"ast":null,"code":"import _objectSpread from \"/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/src/context.js\";\nimport React, { Component, createContext } from \"react\";\nimport MY_SERVICE from \"./services/index\";\nimport Swal from \"sweetalert2\";\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loggedUser: false,\n      formSignup: {\n        name: \"\",\n        lastname: \"\",\n        country: \"\",\n        gender: \"\",\n        password: \"\",\n        email: \"\"\n      },\n      loginForm: {\n        email: \"\",\n        password: \"\"\n      },\n      stockInputs: [0],\n      user: {},\n      newProduct: {\n        name: \"\",\n        brand: \"\",\n        caption: \"\",\n        price: 0,\n        color: [],\n        size: [],\n        quantity: [],\n        details: \"\",\n        image: [],\n        category: \"\",\n        subcategory: \"\"\n      },\n      checked: false,\n      open: false\n    };\n\n    this.handleRadio = e => {\n      const papas = e.target.innerText;\n      console.log(papas);\n\n      if (papas.includes(\"Mujer\")) {\n        this.setState({\n          formSignup: _objectSpread({}, this.state.formSignup, {\n            gender: \"Mujer\"\n          })\n        });\n      } else {\n        this.setState({\n          formSignup: _objectSpread({}, this.state.formSignup, {\n            gender: \"Hombre\"\n          })\n        });\n      }\n    };\n\n    this.handleInput = (e, obj) => {\n      const a = this.state[obj];\n      const key = e.target.name;\n      a[key] = e.target.value;\n      this.setState({\n        obj: a\n      });\n    };\n\n    this.handleSignup = async e => {\n      e.preventDefault();\n\n      const _ref = await MY_SERVICE.signup(this.state.formSignup),\n            data = _ref.data;\n\n      console.log(data);\n      Swal.fire(`Welcome ${data.user.name}`, \"User created\", \"success\");\n    };\n\n    this.handleStockInput = e => {\n      const a = e.target.name;\n      const list = this.state.newProduct.a;\n      list.push(e.target.value);\n      const addStock = {};\n      addStock[a] = list;\n      this.setState({\n        newProduct: addStock\n      });\n    };\n\n    this.addProduct = async e => {\n      e.preventDefault();\n      const newProduct = this.state.newProduct;\n      console.log(this.state.newProduct);\n\n      const _ref2 = await MY_SERVICE.addproduct({\n        newProduct\n      }),\n            data = _ref2.data;\n\n      console.log(data); // Swal.fire(`Success`, `New Product Created ${data.product.name}`, \"success\")\n    };\n\n    this.addStockForm = e => {\n      e.preventDefault();\n      this.setState(prevState => {\n        return _objectSpread({}, prevState, {\n          stockInputs: [...prevState.stockInputs, prevState.stockInputs.length + 1]\n        });\n      });\n    };\n\n    this.handleLogin = (e, cb) => {\n      e.preventDefault();\n      MY_SERVICE.login(this.state.loginForm).then(({\n        data\n      }) => {\n        console.log(data);\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        cb();\n      }).catch(err => {\n        Swal.fire(`Quien sabe que paso`, \"☠️\", \"error\");\n      });\n    };\n\n    this.handleLogout = async cb => {\n      await MY_SERVICE.logout();\n      window.localStorage.clear();\n      this.setState({\n        loggedUser: false,\n        user: {}\n      });\n      cb();\n    };\n\n    this.handleCheckboxChange = event => {\n      this.setState({\n        checked: event.target.checked\n      });\n    };\n\n    this.toggleMenu = e => {\n      const menuname = e.target.name;\n\n      if (this.state.open) {\n        this.setState({\n          open: false\n        });\n      } else {\n        this.setState({\n          open: true\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (document.cookie) {\n      MY_SERVICE.getUser().then(({\n        data\n      }) => {\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        Swal.fire(`Welcome back ${data.user.name} `, \"\", \"success\");\n      }).catch(err => console.log(err));\n    }\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(MyContext.Provider, {\n      value: {\n        state: this.state,\n        loggedUser: this.state.loggedUser,\n        formSignup: this.state.formSignup,\n        loginForm: this.state.loginForm,\n        handleInput: this.handleInput,\n        handleSignup: this.handleSignup,\n        handleLogin: this.handleLogin,\n        handleLogout: this.handleLogout,\n        addStockForm: this.addStockForm,\n        newProduct: this.state.newProduct,\n        addProduct: this.addProduct,\n        stockInputs: this.state.stockInputs,\n        checked: this.state.checked,\n        handleCheckboxChange: this.handleCheckboxChange,\n        switchOpen: this.switchOpen,\n        switchClose: this.switchClose,\n        toggleMenu: this.toggleMenu,\n        handleRadio: this.handleRadio,\n        open: this.state.open // user: this.state.user,\n\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default MyProvider;","map":{"version":3,"sources":["/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/src/context.js"],"names":["React","Component","createContext","MY_SERVICE","Swal","MyContext","MyProvider","state","loggedUser","formSignup","name","lastname","country","gender","password","email","loginForm","stockInputs","user","newProduct","brand","caption","price","color","size","quantity","details","image","category","subcategory","checked","open","handleRadio","e","papas","target","innerText","console","log","includes","setState","handleInput","obj","a","key","value","handleSignup","preventDefault","signup","data","fire","handleStockInput","list","push","addStock","addProduct","addproduct","addStockForm","prevState","length","handleLogin","cb","login","then","catch","err","handleLogout","logout","window","localStorage","clear","handleCheckboxChange","event","toggleMenu","menuname","componentDidMount","document","cookie","getUser","render","switchOpen","switchClose","props","children"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,aAA3B,QAAgD,OAAhD;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AAEA,OAAO,MAAMC,SAAS,GAAGH,aAAa,EAA/B;;AAEP,MAAMI,UAAN,SAAyBL,SAAzB,CAAmC;AAAA;AAAA;AAAA,SACjCM,KADiC,GACzB;AACNC,MAAAA,UAAU,EAAE,KADN;AAENC,MAAAA,UAAU,EAAE;AACVC,QAAAA,IAAI,EAAE,EADI;AAEVC,QAAAA,QAAQ,EAAE,EAFA;AAGVC,QAAAA,OAAO,EAAE,EAHC;AAIVC,QAAAA,MAAM,EAAE,EAJE;AAKVC,QAAAA,QAAQ,EAAE,EALA;AAMVC,QAAAA,KAAK,EAAE;AANG,OAFN;AAUNC,MAAAA,SAAS,EAAE;AACTD,QAAAA,KAAK,EAAE,EADE;AAETD,QAAAA,QAAQ,EAAE;AAFD,OAVL;AAcNG,MAAAA,WAAW,EAAE,CAAC,CAAD,CAdP;AAeNC,MAAAA,IAAI,EAAE,EAfA;AAgBNC,MAAAA,UAAU,EAAE;AACVT,QAAAA,IAAI,EAAE,EADI;AAEVU,QAAAA,KAAK,EAAE,EAFG;AAGVC,QAAAA,OAAO,EAAE,EAHC;AAIVC,QAAAA,KAAK,EAAE,CAJG;AAKVC,QAAAA,KAAK,EAAE,EALG;AAMVC,QAAAA,IAAI,EAAE,EANI;AAOVC,QAAAA,QAAQ,EAAE,EAPA;AAQVC,QAAAA,OAAO,EAAE,EARC;AASVC,QAAAA,KAAK,EAAE,EATG;AAUVC,QAAAA,QAAQ,EAAE,EAVA;AAWVC,QAAAA,WAAW,EAAE;AAXH,OAhBN;AA6BNC,MAAAA,OAAO,EAAE,KA7BH;AA8BNC,MAAAA,IAAI,EAAE;AA9BA,KADyB;;AAAA,SA+CjCC,WA/CiC,GA+CnBC,CAAC,IAAI;AACjB,YAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASC,SAAvB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;;AACA,UAAIA,KAAK,CAACK,QAAN,CAAe,OAAf,CAAJ,EAA4B;AAC5B,aAAKC,QAAL,CAAc;AAAC/B,UAAAA,UAAU,oBAAK,KAAKF,KAAL,CAAWE,UAAhB;AAA2BI,YAAAA,MAAM,EAAC;AAAlC;AAAX,SAAd;AACC,OAFD,MAEM;AACJ,aAAK2B,QAAL,CAAc;AAAC/B,UAAAA,UAAU,oBAAK,KAAKF,KAAL,CAAWE,UAAhB;AAA2BI,YAAAA,MAAM,EAAC;AAAlC;AAAX,SAAd;AACD;AACF,KAvDgC;;AAAA,SAyDjC4B,WAzDiC,GAyDnB,CAACR,CAAD,EAAIS,GAAJ,KAAY;AACxB,YAAMC,CAAC,GAAG,KAAKpC,KAAL,CAAWmC,GAAX,CAAV;AACA,YAAME,GAAG,GAAGX,CAAC,CAACE,MAAF,CAASzB,IAArB;AACAiC,MAAAA,CAAC,CAACC,GAAD,CAAD,GAASX,CAAC,CAACE,MAAF,CAASU,KAAlB;AACA,WAAKL,QAAL,CAAc;AACZE,QAAAA,GAAG,EAAEC;AADO,OAAd;AAGD,KAhEgC;;AAAA,SAkEjCG,YAlEiC,GAkElB,MAAMb,CAAN,IAAW;AACxBA,MAAAA,CAAC,CAACc,cAAF;;AADwB,mBAEP,MAAM5C,UAAU,CAAC6C,MAAX,CAAkB,KAAKzC,KAAL,CAAWE,UAA7B,CAFC;AAAA,YAEhBwC,IAFgB,QAEhBA,IAFgB;;AAGxBZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,IAAZ;AACA7C,MAAAA,IAAI,CAAC8C,IAAL,CAAW,WAAUD,IAAI,CAAC/B,IAAL,CAAUR,IAAK,EAApC,EAAuC,cAAvC,EAAuD,SAAvD;AACD,KAvEgC;;AAAA,SAyEjCyC,gBAzEiC,GAyEdlB,CAAC,IAAI;AACtB,YAAMU,CAAC,GAAGV,CAAC,CAACE,MAAF,CAASzB,IAAnB;AACA,YAAM0C,IAAI,GAAG,KAAK7C,KAAL,CAAWY,UAAX,CAAsBwB,CAAnC;AACAS,MAAAA,IAAI,CAACC,IAAL,CAAUpB,CAAC,CAACE,MAAF,CAASU,KAAnB;AACA,YAAMS,QAAQ,GAAG,EAAjB;AACAA,MAAAA,QAAQ,CAACX,CAAD,CAAR,GAAcS,IAAd;AACA,WAAKZ,QAAL,CAAc;AACZrB,QAAAA,UAAU,EAAEmC;AADA,OAAd;AAGD,KAlFgC;;AAAA,SAoFjCC,UApFiC,GAoFpB,MAAMtB,CAAN,IAAW;AACtBA,MAAAA,CAAC,CAACc,cAAF;AADsB,YAEd5B,UAFc,GAEC,KAAKZ,KAFN,CAEdY,UAFc;AAGtBkB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK/B,KAAL,CAAWY,UAAvB;;AAHsB,oBAIL,MAAMhB,UAAU,CAACqD,UAAX,CAAsB;AAAErC,QAAAA;AAAF,OAAtB,CAJD;AAAA,YAId8B,IAJc,SAIdA,IAJc;;AAKtBZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,IAAZ,EALsB,CAMtB;AACD,KA3FgC;;AAAA,SA6FjCQ,YA7FiC,GA6FlBxB,CAAC,IAAI;AAClBA,MAAAA,CAAC,CAACc,cAAF;AACA,WAAKP,QAAL,CAAckB,SAAS,IAAI;AACzB,iCACKA,SADL;AAEEzC,UAAAA,WAAW,EAAE,CACX,GAAGyC,SAAS,CAACzC,WADF,EAEXyC,SAAS,CAACzC,WAAV,CAAsB0C,MAAtB,GAA+B,CAFpB;AAFf;AAOD,OARD;AASD,KAxGgC;;AAAA,SA0GjCC,WA1GiC,GA0GnB,CAAC3B,CAAD,EAAI4B,EAAJ,KAAW;AACvB5B,MAAAA,CAAC,CAACc,cAAF;AACA5C,MAAAA,UAAU,CAAC2D,KAAX,CAAiB,KAAKvD,KAAL,CAAWS,SAA5B,EACG+C,IADH,CACQ,CAAC;AAAEd,QAAAA;AAAF,OAAD,KAAc;AAClBZ,QAAAA,OAAO,CAACC,GAAR,CAAYW,IAAZ;AACA,aAAKT,QAAL,CAAc;AACZhC,UAAAA,UAAU,EAAE,IADA;AAEZU,UAAAA,IAAI,EAAE+B,IAAI,CAAC/B;AAFC,SAAd;AAIA2C,QAAAA,EAAE;AACH,OARH,EASGG,KATH,CASSC,GAAG,IAAI;AACZ7D,QAAAA,IAAI,CAAC8C,IAAL,CAAW,qBAAX,EAAiC,IAAjC,EAAuC,OAAvC;AACD,OAXH;AAYD,KAxHgC;;AAAA,SA0HjCgB,YA1HiC,GA0HlB,MAAML,EAAN,IAAY;AACzB,YAAM1D,UAAU,CAACgE,MAAX,EAAN;AAEAC,MAAAA,MAAM,CAACC,YAAP,CAAoBC,KAApB;AACA,WAAK9B,QAAL,CAAc;AACZhC,QAAAA,UAAU,EAAE,KADA;AAEZU,QAAAA,IAAI,EAAE;AAFM,OAAd;AAIA2C,MAAAA,EAAE;AACH,KAnIgC;;AAAA,SAqIjCU,oBArIiC,GAqIVC,KAAK,IAAI;AAC9B,WAAKhC,QAAL,CAAc;AAAEV,QAAAA,OAAO,EAAE0C,KAAK,CAACrC,MAAN,CAAaL;AAAxB,OAAd;AACD,KAvIgC;;AAAA,SA0IjC2C,UA1IiC,GA0IpBxC,CAAC,IAAI;AAChB,YAAMyC,QAAQ,GAAGzC,CAAC,CAACE,MAAF,CAASzB,IAA1B;;AACA,UAAI,KAAKH,KAAL,CAAWwB,IAAf,EAAqB;AACnB,aAAKS,QAAL,CAAc;AAAET,UAAAA,IAAI,EAAE;AAAR,SAAd;AACD,OAFD,MAEO;AACL,aAAKS,QAAL,CAAc;AAAET,UAAAA,IAAI,EAAE;AAAR,SAAd;AACD;AACF,KAjJgC;AAAA;;AAkCjC4C,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,QAAQ,CAACC,MAAb,EAAqB;AACnB1E,MAAAA,UAAU,CAAC2E,OAAX,GACGf,IADH,CACQ,CAAC;AAAEd,QAAAA;AAAF,OAAD,KAAc;AAClB,aAAKT,QAAL,CAAc;AACZhC,UAAAA,UAAU,EAAE,IADA;AAEZU,UAAAA,IAAI,EAAE+B,IAAI,CAAC/B;AAFC,SAAd;AAIAd,QAAAA,IAAI,CAAC8C,IAAL,CAAW,gBAAeD,IAAI,CAAC/B,IAAL,CAAUR,IAAK,GAAzC,EAA6C,EAA7C,EAAiD,SAAjD;AACD,OAPH,EAQGsD,KARH,CAQSC,GAAG,IAAI5B,OAAO,CAACC,GAAR,CAAY2B,GAAZ,CARhB;AASD;AACF;;AAqGDc,EAAAA,MAAM,GAAG;AACP1C,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK/B,KAAjB;AACA,WACE,oBAAC,SAAD,CAAW,QAAX;AACE,MAAA,KAAK,EAAE;AACLA,QAAAA,KAAK,EAAE,KAAKA,KADP;AAELC,QAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWC,UAFlB;AAGLC,QAAAA,UAAU,EAAE,KAAKF,KAAL,CAAWE,UAHlB;AAILO,QAAAA,SAAS,EAAE,KAAKT,KAAL,CAAWS,SAJjB;AAKLyB,QAAAA,WAAW,EAAE,KAAKA,WALb;AAMLK,QAAAA,YAAY,EAAE,KAAKA,YANd;AAOLc,QAAAA,WAAW,EAAE,KAAKA,WAPb;AAQLM,QAAAA,YAAY,EAAE,KAAKA,YARd;AASLT,QAAAA,YAAY,EAAE,KAAKA,YATd;AAULtC,QAAAA,UAAU,EAAE,KAAKZ,KAAL,CAAWY,UAVlB;AAWLoC,QAAAA,UAAU,EAAE,KAAKA,UAXZ;AAYLtC,QAAAA,WAAW,EAAE,KAAKV,KAAL,CAAWU,WAZnB;AAaLa,QAAAA,OAAO,EAAE,KAAKvB,KAAL,CAAWuB,OAbf;AAcLyC,QAAAA,oBAAoB,EAAE,KAAKA,oBAdtB;AAeLS,QAAAA,UAAU,EAAE,KAAKA,UAfZ;AAgBLC,QAAAA,WAAW,EAAE,KAAKA,WAhBb;AAiBLR,QAAAA,UAAU,EAAE,KAAKA,UAjBZ;AAkBLzC,QAAAA,WAAW,EAAE,KAAKA,WAlBb;AAoBLD,QAAAA,IAAI,EAAE,KAAKxB,KAAL,CAAWwB,IApBZ,CAqBL;;AArBK,OADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAyBG,KAAKmD,KAAL,CAAWC,QAzBd,CADF;AA6BD;;AAlLgC;;AAqLnC,eAAe7E,UAAf","sourcesContent":["import React, { Component, createContext } from \"react\";\nimport MY_SERVICE from \"./services/index\";\nimport Swal from \"sweetalert2\";\n\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  state = {\n    loggedUser: false,\n    formSignup: {\n      name: \"\",\n      lastname: \"\",\n      country: \"\",\n      gender: \"\",\n      password: \"\",\n      email: \"\"\n    },\n    loginForm: {\n      email: \"\",\n      password: \"\"\n    },\n    stockInputs: [0],\n    user: {},\n    newProduct: {\n      name: \"\",\n      brand: \"\",\n      caption: \"\",\n      price: 0,\n      color: [],\n      size: [],\n      quantity: [],\n      details: \"\",\n      image: [],\n      category: \"\",\n      subcategory: \"\"\n    },\n    checked: false,\n    open: false\n  };\n\n  componentDidMount() {\n    if (document.cookie) {\n      MY_SERVICE.getUser()\n        .then(({ data }) => {\n          this.setState({\n            loggedUser: true,\n            user: data.user\n          });\n          Swal.fire(`Welcome back ${data.user.name} `, \"\", \"success\");\n        })\n        .catch(err => console.log(err));\n    }\n  }\n  handleRadio = e => {\n    const papas = e.target.innerText\n    console.log(papas)\n    if (papas.includes(\"Mujer\")){\n    this.setState({formSignup:{...this.state.formSignup,gender:\"Mujer\"}})\n    } else{\n      this.setState({formSignup:{...this.state.formSignup,gender:\"Hombre\"}})\n    }\n  }\n\n  handleInput = (e, obj) => {\n    const a = this.state[obj];\n    const key = e.target.name;\n    a[key] = e.target.value;\n    this.setState({\n      obj: a\n    });\n  };\n\n  handleSignup = async e => {\n    e.preventDefault();\n    const { data } = await MY_SERVICE.signup(this.state.formSignup);\n    console.log(data);\n    Swal.fire(`Welcome ${data.user.name}`, \"User created\", \"success\");\n  };\n\n  handleStockInput = e => {\n    const a = e.target.name;\n    const list = this.state.newProduct.a;\n    list.push(e.target.value);\n    const addStock = {};\n    addStock[a] = list;\n    this.setState({\n      newProduct: addStock\n    });\n  };\n\n  addProduct = async e => {\n    e.preventDefault();\n    const { newProduct } = this.state;\n    console.log(this.state.newProduct);\n    const { data } = await MY_SERVICE.addproduct({ newProduct });\n    console.log(data);\n    // Swal.fire(`Success`, `New Product Created ${data.product.name}`, \"success\")\n  };\n\n  addStockForm = e => {\n    e.preventDefault();\n    this.setState(prevState => {\n      return {\n        ...prevState,\n        stockInputs: [\n          ...prevState.stockInputs,\n          prevState.stockInputs.length + 1\n        ]\n      };\n    });\n  };\n\n  handleLogin = (e, cb) => {\n    e.preventDefault();\n    MY_SERVICE.login(this.state.loginForm)\n      .then(({ data }) => {\n        console.log(data);\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        cb();\n      })\n      .catch(err => {\n        Swal.fire(`Quien sabe que paso`, \"☠️\", \"error\");\n      });\n  };\n\n  handleLogout = async cb => {\n    await MY_SERVICE.logout();\n\n    window.localStorage.clear();\n    this.setState({\n      loggedUser: false,\n      user: {}\n    });\n    cb();\n  };\n\n  handleCheckboxChange = event => {\n    this.setState({ checked: event.target.checked });\n  };\n\n  // side menu\n  toggleMenu = e => {\n    const menuname = e.target.name;\n    if (this.state.open) {\n      this.setState({ open: false });\n    } else {\n      this.setState({ open: true });\n    }\n  };\n\n  render() {\n    console.log(this.state);\n    return (\n      <MyContext.Provider\n        value={{\n          state: this.state,\n          loggedUser: this.state.loggedUser,\n          formSignup: this.state.formSignup,\n          loginForm: this.state.loginForm,\n          handleInput: this.handleInput,\n          handleSignup: this.handleSignup,\n          handleLogin: this.handleLogin,\n          handleLogout: this.handleLogout,\n          addStockForm: this.addStockForm,\n          newProduct: this.state.newProduct,\n          addProduct: this.addProduct,\n          stockInputs: this.state.stockInputs,\n          checked: this.state.checked,\n          handleCheckboxChange: this.handleCheckboxChange,\n          switchOpen: this.switchOpen,\n          switchClose: this.switchClose,\n          toggleMenu: this.toggleMenu,\n          handleRadio: this.handleRadio,\n\n          open: this.state.open\n          // user: this.state.user,\n        }}\n      >\n        {this.props.children}\n      </MyContext.Provider>\n    );\n  }\n}\n\nexport default MyProvider;\n"]},"metadata":{},"sourceType":"module"}