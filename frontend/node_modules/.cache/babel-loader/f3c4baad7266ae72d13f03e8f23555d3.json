{"ast":null,"code":"import _objectSpread from \"/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/src/context.js\";\nimport React, { Component, createContext } from \"react\";\nimport MY_SERVICE from \"./services/index\";\nimport Swal from \"sweetalert2\";\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loggedUser: false,\n      formSignup: {\n        name: \"\",\n        lastname: \"\",\n        country: \"\",\n        gender: \"\",\n        password: \"\",\n        email: \"\"\n      },\n      newCartProduct: {\n        id: String,\n        price: Number,\n        quantity: Number,\n        size: String\n      },\n      createdOrder: {},\n      loginForm: {\n        email: \"\",\n        password: \"\"\n      },\n      stockInputs: [0],\n      user: {},\n      newProduct: {\n        name: \"\",\n        brand: \"\",\n        caption: \"\",\n        price: 0,\n        color: [],\n        size: [],\n        quantity: [],\n        details: \"\",\n        image: [],\n        category: \"\",\n        subcategory: \"\"\n      },\n      productFeed: [],\n      checked: false,\n      productDetail: {},\n      open: false,\n      Cart: [],\n      carousel: 0,\n      wishListProds: []\n    };\n\n    this.handleRadio = e => {\n      const genderValue = e.target.innerText;\n\n      if (genderValue === \"Mujer\") {\n        this.setState({\n          formSignup: _objectSpread({}, this.state.formSignup, {\n            gender: \"Mujer\"\n          })\n        });\n      } else {\n        this.setState({\n          formSignup: _objectSpread({}, this.state.formSignup, {\n            gender: \"Hombre\"\n          })\n        });\n      }\n    };\n\n    this.handleInput = (e, obj) => {\n      const a = this.state[obj];\n      console.log(a);\n      const key = e.target.name;\n      a[key] = e.target.value;\n      this.setState({\n        obj: a\n      });\n    };\n\n    this.handleSignup = async e => {\n      e.preventDefault();\n\n      const _ref = await MY_SERVICE.signup(this.state.formSignup),\n            data = _ref.data;\n\n      console.log(data);\n      Swal.fire(`Welcome ${data.user.name}`, \"User created\", \"success\");\n    };\n\n    this.handleStockInput = e => {\n      const a = e.target.name;\n      const list = this.state.newProduct.a;\n      list.push(e.target.value);\n      const addStock = {};\n      addStock[a] = list;\n      this.setState({\n        newProduct: addStock\n      });\n    };\n\n    this.handleProductQty = a => {\n      console.log();\n\n      if (a && this.setState.newProduct > 0) {\n        this.setState({\n          newProduct: this.setState.newProduct.quantity - 1\n        });\n      }\n\n      if (!a && this.setState.newProduct > 0) {\n        this.setState({\n          newProduct: this.setState.newProduct.quantity + 1\n        });\n      }\n    };\n\n    this.addProduct = async e => {\n      e.preventDefault();\n      const newProduct = this.state.newProduct;\n      console.log(this.state.newProduct);\n\n      const _ref2 = await MY_SERVICE.addproduct({\n        newProduct\n      }),\n            data = _ref2.data;\n\n      console.log(data); // Swal.fire(`Success`, `New Product Created ${data.product.name}`, \"success\")\n    };\n\n    this.addStockForm = e => {\n      e.preventDefault();\n      this.setState(prevState => {\n        return _objectSpread({}, prevState, {\n          stockInputs: [...prevState.stockInputs, prevState.stockInputs.length + 1]\n        });\n      });\n    };\n\n    this.handleLogin = (e, cb) => {\n      e.preventDefault();\n      MY_SERVICE.login(this.state.loginForm).then(({\n        data\n      }) => {\n        console.log(data);\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        cb();\n      }).catch(err => {\n        Swal.fire(`Quien sabe que paso`, \"☠️\", \"error\");\n      });\n    };\n\n    this.handleLogout = async cb => {\n      await MY_SERVICE.logout();\n      window.localStorage.clear();\n      this.setState({\n        loggedUser: false,\n        user: {}\n      });\n      this.props.history.push(\"/\"); // ESTO NO FUNCIONA!!!!\n    };\n\n    this.handleCheckboxChange = event => {\n      this.setState({\n        checked: event.target.checked\n      });\n    };\n\n    this.toggleMenu = e => {\n      const menuname = e.target.name;\n\n      if (this.state.open) {\n        this.setState({\n          open: false\n        });\n      } else {\n        this.setState({\n          open: true\n        });\n      }\n    };\n\n    this.deleteProduct = async e => {\n      // HAY QUE PONER EN EL ID DEL BOTÓN EL ID DEL PRODUCTO A ELIMINAR\n      //HAY QUE HACER UN COMPONENT DID CHANGE PARA REFRESCAR LA PÁGINA Y ACTUALIZARLA\n      const usr = await MY_SERVICE.deleteProduct(e.target.id);\n      this.setState({\n        wishListProds: usr.wishList\n      });\n    };\n\n    this.addProductToWishlist = async e => {\n      const usr = await MY_SERVICE.addProductToWishlist(e.target.id);\n      this.setState({\n        wishListProds: usr.wishList\n      });\n    };\n\n    this.deleteProductFromWishlist = async e => {\n      const _ref3 = await MY_SERVICE.deleteProductFromWishlist(e.target.id),\n            newlist = _ref3.newlist;\n\n      this.setState({\n        wishListProds: newlist.usr.wishList\n      });\n    };\n\n    this.getProducts = async () => {\n      const _ref4 = await MY_SERVICE.getProducts(),\n            data = _ref4.data;\n\n      this.setState({\n        productFeed: data.products\n      });\n    };\n\n    this.getProductDetail = async (e, cb) => {\n      // LA CARD DEL PRODUCTO TIENE QUE TENER EL ONCLICK CON ESTA FUNCIÓN Y TIENE QUE TENER EL ID CON EL ID DEL PRODUCTO EN CUESTIÓN\n      const product = await MY_SERVICE.productDetail(e.target.id);\n      this.setState({\n        productDetail: product\n      });\n      cb();\n    };\n\n    this.addProductToCart = () => {\n      const prod = this.state.newCartProduct;\n      const cart = this.state.Cart.push(prod);\n      this.setState({\n        Cart: cart\n      });\n    };\n\n    this.submitOrder = async () => {\n      const reducer = (accumulator, currentValue) => accumulator + currentValue;\n\n      const productsArray = this.state.Cart.map(e => ({\n        prod: {\n          product: e.id,\n          quantity: e.quantity\n        }\n      }));\n      const totalValue = productsArray.map(e => e.quantity * e.price).reduce(reducer);\n      const newOrd = {\n        products: productsArray,\n        total: totalValue\n      };\n\n      const _ref5 = await MY_SERVICE.createOrder(newOrd),\n            data = _ref5.data;\n\n      this.setState({\n        createdOrder: data.newOrder\n      });\n    };\n\n    this.nextCarousel = step => {\n      const carousel = this.state.carousel;\n\n      if (step === \"left\") {\n        if (this.state.carousel === 0) {\n          return this.setState({\n            carousel: 3\n          });\n        }\n\n        return this.setState({\n          carousel: carousel - 1\n        });\n      } else {\n        if (this.state.carousel === 3) {\n          return this.setState({\n            carousel: 0\n          });\n        }\n\n        return this.setState({\n          carousel: carousel + 1\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (document.cookie) {\n      MY_SERVICE.getUser().then(({\n        data\n      }) => {\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        Swal.fire(`Welcome back ${data.user.name} `, \"\", \"success\");\n      }).catch(err => console.log(err));\n    }\n  }\n\n  render() {\n    ;\n    return React.createElement(MyContext.Provider, {\n      value: {\n        state: this.state,\n        loggedUser: this.state.loggedUser,\n        formSignup: this.state.formSignup,\n        loginForm: this.state.loginForm,\n        handleInput: this.handleInput,\n        handleSignup: this.handleSignup,\n        handleLogin: this.handleLogin,\n        handleLogout: this.handleLogout,\n        addStockForm: this.addStockForm,\n        newProduct: this.state.newProduct,\n        addProduct: this.addProduct,\n        stockInputs: this.state.stockInputs,\n        checked: this.state.checked,\n        handleCheckboxChange: this.handleCheckboxChange,\n        switchOpen: this.switchOpen,\n        switchClose: this.switchClose,\n        toggleMenu: this.toggleMenu,\n        handleRadio: this.handleRadio,\n        deleteProduct: this.deleteProduct,\n        deleteProductFromWishlist: this.deleteProductFromWishlist,\n        addProductToWishlist: this.addProductToWishlist,\n        getProducts: this.getProducts,\n        getProductDetail: this.getProductDetail,\n        addProductToCart: this.addProductToCart,\n        submitOrder: this.submitOrder,\n        open: this.state.open,\n        newCartProduct: this.state.newCartProduct,\n        createdOrder: this.state.createdOrder,\n        productFeed: this.state.productFeed,\n        productDetail: this.state.productDetail,\n        Cart: this.state.Cart,\n        wishListProds: this.state.wishListProds,\n        handleProductQty: this.handleProductQty // user: this.state.user,\n\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default MyProvider;","map":{"version":3,"sources":["/Users/mariasantosmoises/Documents/Ironhack/mome/frontend/src/context.js"],"names":["React","Component","createContext","MY_SERVICE","Swal","MyContext","MyProvider","state","loggedUser","formSignup","name","lastname","country","gender","password","email","newCartProduct","id","String","price","Number","quantity","size","createdOrder","loginForm","stockInputs","user","newProduct","brand","caption","color","details","image","category","subcategory","productFeed","checked","productDetail","open","Cart","carousel","wishListProds","handleRadio","e","genderValue","target","innerText","setState","handleInput","obj","a","console","log","key","value","handleSignup","preventDefault","signup","data","fire","handleStockInput","list","push","addStock","handleProductQty","addProduct","addproduct","addStockForm","prevState","length","handleLogin","cb","login","then","catch","err","handleLogout","logout","window","localStorage","clear","props","history","handleCheckboxChange","event","toggleMenu","menuname","deleteProduct","usr","wishList","addProductToWishlist","deleteProductFromWishlist","newlist","getProducts","products","getProductDetail","product","addProductToCart","prod","cart","submitOrder","reducer","accumulator","currentValue","productsArray","map","totalValue","reduce","newOrd","total","createOrder","newOrder","nextCarousel","step","componentDidMount","document","cookie","getUser","render","switchOpen","switchClose","children"],"mappings":"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","sourcesContent":["import React, { Component, createContext } from \"react\";\nimport MY_SERVICE from \"./services/index\";\nimport Swal from \"sweetalert2\";\n\nexport const MyContext = createContext();\n\nclass MyProvider extends Component {\n  state = {\n    loggedUser: false,\n    formSignup: {\n      name: \"\",\n      lastname: \"\",\n      country: \"\",\n      gender: \"\",\n      password: \"\",\n      email: \"\"\n    },\n    newCartProduct: {\n      id: String,\n      price: Number,\n      quantity: Number,\n      size: String\n    },\n    createdOrder: {},\n    loginForm: {\n      email: \"\",\n      password: \"\"\n    },\n    stockInputs: [0],\n    user: {},\n    newProduct: {\n      name: \"\",\n      brand: \"\",\n      caption: \"\",\n      price: 0,\n      color: [],\n      size: [],\n      quantity: [],\n      details: \"\",\n      image: [],\n      category: \"\",\n      subcategory: \"\"\n    },\n    productFeed: [],\n    checked: false,\n    productDetail: {},\n    open: false,\n    Cart: [],\n    carousel: 0,\n    wishListProds:[]\n  };\n\n  componentDidMount() {\n    if (document.cookie) {\n      MY_SERVICE.getUser()\n        .then(({ data }) => {\n          this.setState({\n            loggedUser: true,\n            user: data.user\n          });\n          Swal.fire(`Welcome back ${data.user.name} `, \"\", \"success\");\n        })\n        .catch(err => console.log(err));\n    }\n  }\n  handleRadio = e => {\n    const genderValue = e.target.innerText;\n    if (genderValue === \"Mujer\") {\n      this.setState({\n        formSignup: { ...this.state.formSignup, gender: \"Mujer\" }\n      });\n    } else {\n      this.setState({\n        formSignup: { ...this.state.formSignup, gender: \"Hombre\" }\n      });\n    }\n  };\n\n  handleInput = (e, obj) => {\n    const a = this.state[obj];\n    console.log(a)\n    const key = e.target.name;\n    a[key] = e.target.value;\n    this.setState({\n      obj: a\n    });\n  };\n\n  handleSignup = async e => {\n    e.preventDefault();\n    const { data } = await MY_SERVICE.signup(this.state.formSignup);\n    console.log(data);\n    Swal.fire(`Welcome ${data.user.name}`, \"User created\", \"success\");\n  };\n\n  handleStockInput = e => {\n    const a = e.target.name;\n    const list = this.state.newProduct.a;\n    list.push(e.target.value);\n    const addStock = {};\n    addStock[a] = list;\n    this.setState({\n      newProduct: addStock\n    });\n  };\n  handleProductQty = a =>{\n    console.log()\n    if(a && this.setState.newProduct>0) {this.setState({newProduct:this.setState.newProduct.quantity-1})}\n    if(!a && this.setState.newProduct>0){ this.setState({newProduct:this.setState.newProduct.quantity+1})}\n  }\n\n  addProduct = async e => {\n    e.preventDefault();\n    const { newProduct } = this.state;\n    console.log(this.state.newProduct);\n    const { data } = await MY_SERVICE.addproduct({ newProduct });\n    console.log(data);\n    // Swal.fire(`Success`, `New Product Created ${data.product.name}`, \"success\")\n  };\n\n  addStockForm = e => {\n    e.preventDefault();\n    this.setState(prevState => {\n      return {\n        ...prevState,\n        stockInputs: [\n          ...prevState.stockInputs,\n          prevState.stockInputs.length + 1\n        ]\n      };\n    });\n  };\n\n  handleLogin = (e, cb) => {\n    e.preventDefault();\n    MY_SERVICE.login(this.state.loginForm)\n      .then(({ data }) => {\n        console.log(data);\n        this.setState({\n          loggedUser: true,\n          user: data.user\n        });\n        cb();\n      })\n      .catch(err => {\n        Swal.fire(`Quien sabe que paso`, \"☠️\", \"error\");\n      });\n  };\n\n  handleLogout = async cb => {\n    await MY_SERVICE.logout();\n\n    window.localStorage.clear();\n    this.setState({\n      loggedUser: false,\n      user: {}\n    });\n    this.props.history.push(\"/\"); // ESTO NO FUNCIONA!!!!\n  };\n\n  handleCheckboxChange = event => {\n    this.setState({ checked: event.target.checked });\n  };\n\n  // side menu\n  toggleMenu = e => {\n    const menuname = e.target.name;\n    if (this.state.open) {\n      this.setState({ open: false });\n    } else {\n      this.setState({ open: true });\n    }\n  };\n\n\n\n  deleteProduct = async e => {\n    // HAY QUE PONER EN EL ID DEL BOTÓN EL ID DEL PRODUCTO A ELIMINAR\n    //HAY QUE HACER UN COMPONENT DID CHANGE PARA REFRESCAR LA PÁGINA Y ACTUALIZARLA\n    const usr = await MY_SERVICE.deleteProduct(e.target.id);\n    this.setState({wishListProds:usr.wishList})\n  };\n\n\n  addProductToWishlist = async e =>{\n    \n    const usr = await MY_SERVICE.addProductToWishlist(e.target.id)\n    this.setState({wishListProds:usr.wishList})\n  }\n  deleteProductFromWishlist = async e => {\n    const  { newlist } = await MY_SERVICE.deleteProductFromWishlist(e.target.id);\n    this.setState({wishListProds:newlist.usr.wishList})\n  };\n  getProducts = async () => {\n    const {data} = await MY_SERVICE.getProducts();\n    this.setState({ productFeed: data.products });\n  };\n  getProductDetail = async (e, cb) => {\n    // LA CARD DEL PRODUCTO TIENE QUE TENER EL ONCLICK CON ESTA FUNCIÓN Y TIENE QUE TENER EL ID CON EL ID DEL PRODUCTO EN CUESTIÓN\n    const product = await MY_SERVICE.productDetail(e.target.id);\n    this.setState({ productDetail: product });\n    cb()\n  };\n  // ESTA BELLEZZA VA EN EL SUBMIT BUTTON DE ADD TO CART, EN LOS INPUTS DE LOS PRODUCTOS TIENE QUE IR EL HANDLEINPUT RECIBIENDO COMO SEGUNDO PARAMETRO \"newCartProduct\" PARA QUE LO AÑADA A ESE FORM\n  addProductToCart = () => {\n    const prod = this.state.newCartProduct;\n    const cart = this.state.Cart.push(prod);\n    this.setState({ Cart: cart });\n  };\n  // CONFIRMACIÓN DE LA ORDEN\n  submitOrder = async () => {\n    const reducer = (accumulator, currentValue) => accumulator + currentValue;\n    const productsArray = this.state.Cart.map(e => ({\n      prod: { product: e.id, quantity: e.quantity }\n    }));\n    const totalValue = productsArray\n      .map(e => e.quantity * e.price)\n      .reduce(reducer);\n    const newOrd = { products: productsArray, total: totalValue };\n    const { data } = await MY_SERVICE.createOrder(newOrd);\n    this.setState({ createdOrder: data.newOrder });\n  };\n\n  nextCarousel = step => {\n    const { carousel } = this.state;\n    if (step === \"left\") {\n      if (this.state.carousel === 0) {\n        return this.setState({ carousel: 3 });\n      }\n      return this.setState({ carousel: carousel - 1 });\n    } else {\n      if (this.state.carousel === 3) {\n        return this.setState({ carousel: 0 });\n      }\n      return this.setState({ carousel: carousel + 1 });\n    }\n  };\n\n  render() {;\n    return (\n      <MyContext.Provider\n        value={{\n          state: this.state,\n          loggedUser: this.state.loggedUser,\n          formSignup: this.state.formSignup,\n          loginForm: this.state.loginForm,\n          handleInput: this.handleInput,\n          handleSignup: this.handleSignup,\n          handleLogin: this.handleLogin,\n          handleLogout: this.handleLogout,\n          addStockForm: this.addStockForm,\n          newProduct: this.state.newProduct,\n          addProduct: this.addProduct,\n          stockInputs: this.state.stockInputs,\n          checked: this.state.checked,\n          handleCheckboxChange: this.handleCheckboxChange,\n          switchOpen: this.switchOpen,\n          switchClose: this.switchClose,\n          toggleMenu: this.toggleMenu,\n          handleRadio: this.handleRadio,\n          deleteProduct: this.deleteProduct,\n          deleteProductFromWishlist: this.deleteProductFromWishlist,\n          addProductToWishlist: this.addProductToWishlist,\n          getProducts: this.getProducts,\n          getProductDetail: this.getProductDetail,\n          addProductToCart: this.addProductToCart,\n          submitOrder: this.submitOrder,\n          open: this.state.open,\n          newCartProduct: this.state.newCartProduct,\n          createdOrder: this.state.createdOrder,\n          productFeed: this.state.productFeed,\n          productDetail: this.state.productDetail,\n          Cart: this.state.Cart,\n          wishListProds: this.state.wishListProds,\n          handleProductQty: this.handleProductQty\n\n          // user: this.state.user,\n        }}\n      >\n        {this.props.children}\n      </MyContext.Provider>\n    );\n  }\n}\n\nexport default MyProvider;\n"]},"metadata":{},"sourceType":"module"}